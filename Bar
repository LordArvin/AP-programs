
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.geom.Rectangle2D;
import java.util.ArrayList;
import java.util.Random;

import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class Bar extends JPanel{
	
		
	public Bar(){
		
		counter = 0;
		button = makeButton("Add Bar");
		controlPanel = new JPanel();
		field = new JTextField(10);
		label = new JLabel("Bar Height = "); //add label to JTextField later
		controlPanel.add(field);
		controlPanel.add(button);
		add(controlPanel, BorderLayout.NORTH);
		bars = new ArrayList<Rectangle2D.Double>();
		isPressed = false;
		
		generator = new Random();
		repaint();
	}
	
	public void paintComponent(Graphics g1){
		super.paintComponent(g1);
		Graphics2D g2 = (Graphics2D)g1;
		
	if(isPressed){
			
		for(int i = 1; i <= counter; i++ ){ 

			Rectangle2D.Double rect = bars.get(i - 1);
			g2.draw(rect);
			
			
			float r = generator.nextFloat();
			float g = generator.nextFloat();
			float b = generator.nextFloat();
			
			switch(i) {
			
			case 1: g2.setColor(Color.red); break;	
			case 2: g2.setColor(Color.black); break;
			case 3: g2.setColor(Color.BLUE); break;
			case 4: g2.setColor(Color.GREEN); break;
			case 5: g2.setColor(new Color(r, g, b)); break;
			
			}
			
			g2.fill(rect);
			
			if(counter > 5) {
				bars.clear();
				counter = 0;
				setBackground(Color.white);
			}
			
			}
		}
		
		
	}
	
	public JButton makeButton(String name){
		
		JButton button = new JButton(name);
		
		class ButtonListener implements ActionListener{
			
			@Override
			public void actionPerformed(ActionEvent event) {
				
				
				isPressed = true;
				counter++;
				
				double n = Double.parseDouble(field.getText());
				
				bars.add((new Rectangle2D.Double(BAR_WIDTH * counter, getHeight() - n, 50, n))); //change this
				
				System.out.println(counter);
				
				
				
			}
			
			
		}
		ActionListener list = new ButtonListener();
		button.addActionListener(list);
		
		return button;
	}
	
	
	private JButton button;
	private JPanel controlPanel;
	private JTextField field;
	private JLabel label;
	private final double BAR_WIDTH = 75; 
	private ArrayList<Rectangle2D.Double> bars;
	private boolean isPressed;
	private int counter;
	private Random generator;
	
}
